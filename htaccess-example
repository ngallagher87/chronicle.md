Options +FollowSymlinks

ErrorDocument 404 /error.html
ErrorDocument 500 /error.html

<IfModule mod_rewrite.c>

# TODO: rework filtering for API versus PHP/static HTML

RewriteEngine On
RewriteBase /

# Don't allow access to system folders
RewriteRule _parts(.*) /error.html [R,L]
RewriteRule lib/(.*) /error.html [R,L]

# General requests (enable for standard php/index delegate behaviour)
RewriteCond %{DOCUMENT_ROOT}/index.php -f
RewriteRule ^error.html$ - [QSA,L] 
RewriteRule ^error.php$ - [QSA,L] 
RewriteRule ^styles/(.*)$ - [L] 
RewriteRule ^combobulate.php$ - [L]
RewriteRule ^(?:feed|feed/|feed.xml)$ /combobulate.php?r=feed&t=xml&c=feed [QSA,L]
RewriteRule ^index.php$ /combobulate.php?r=listing&t=md$2&c= [QSA,L]
RewriteRule ^(.*)\.((?:md|html|php))$ /combobulate.php?r=$1&t=$2&c= [QSA,L]
RewriteRule ^([^\.\/]+)(?:/|)$ /combobulate.php?r=$1&t=md&c= [QSA,L]
RewriteRule ^$ /combobulate.php?r=index&t=md&c= [QSA,L]

</IfModule>
